<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate INSPIRE IDs — inspire_id_coords • gridmaker</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate INSPIRE IDs — inspire_id_coords"><meta name="description" content="Given pairs of coordinates, generates their INSPIRE grid representation.
Given INSPIRE identifiers, can also extract the X and Y coordinates.
An INSPIRE ID contains information about the CRS, cell size and the
ETRS89-LAEA coordinates of the lower-left corner of the grid cell in its
format.
CRS3035{cellsize}mN{y}E{x} # long format
    {cellsize}N{y}E{x}         # short format (NE order)
    {cellsize}E{x}N{y}         # short format (EN order)

The long format always uses meters while the short format aggregates
cell sizes greater or equal to 1000m to km."><meta property="og:description" content="Given pairs of coordinates, generates their INSPIRE grid representation.
Given INSPIRE identifiers, can also extract the X and Y coordinates.
An INSPIRE ID contains information about the CRS, cell size and the
ETRS89-LAEA coordinates of the lower-left corner of the grid cell in its
format.
CRS3035{cellsize}mN{y}E{x} # long format
    {cellsize}N{y}E{x}         # short format (NE order)
    {cellsize}E{x}N{y}         # short format (EN order)

The long format always uses meters while the short format aggregates
cell sizes greater or equal to 1000m to km."><meta property="og:image" content="http://www.ekotov.pro/gridmaker/reference/figures/card.png"><meta property="og:image:alt" content="gridmaker: Create INSPIRE-compliant grids with IDs"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@EgorKotov"><meta name="twitter:site" content="@EgorKotov"><!-- counter.dev analytics --><script data-goatcounter="https://jukadipos.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script><!-- counter.dev analytics --><script src="https://cdn.counter.dev/script.js" data-id="7e3e8d31-9a84-48b0-a678-a00715236a90" data-utcoffset="1"></script><script>
 (function(h,o,t,j,a,r){
     h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
     h._hjSettings={hjid:3578286,hjsv:6};
     a=o.getElementsByTagName('head')[0];
     r=o.createElement('script');r.async=1;
     r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
     a.appendChild(r);
 })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gridmaker</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/gridmaker.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/e-kotov/gridmaker/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Generate INSPIRE IDs</h1>
      <small class="dont-index">Source: <a href="https://github.com/e-kotov/gridmaker/blob/main/R/inspire_id_from_coords.R" class="external-link"><code>R/inspire_id_from_coords.R</code></a>, <a href="https://github.com/e-kotov/gridmaker/blob/main/R/inspire_id_to_coords.R" class="external-link"><code>R/inspire_id_to_coords.R</code></a></small>
      <div class="d-none name"><code>inspire_id_coords.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given pairs of coordinates, generates their INSPIRE grid representation.
Given INSPIRE identifiers, can also extract the X and Y coordinates.</p>
<p>An INSPIRE ID contains information about the CRS, cell size and the
ETRS89-LAEA coordinates of the lower-left corner of the grid cell in its
format.</p>
<div class="sourceCode"><pre><code>CRS3035{cellsize}mN{y}E{x} # long format
    {cellsize}N{y}E{x}         # short format (NE order)
    {cellsize}E{x}N{y}         # short format (EN order)</code></pre></div>

<p>The long format always uses meters while the short format aggregates
cell sizes greater or equal to 1000m to km.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">inspire_id_from_coords</span><span class="op">(</span></span>
<span>  <span class="va">coords</span>,</span>
<span>  cellsize_m <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  short <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  axis_order <span class="op">=</span> <span class="st">"NE"</span>,</span>
<span>  llc <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  tolerance <span class="op">=</span> <span class="fl">1e-06</span>,</span>
<span>  sample <span class="op">=</span> <span class="fl">2000</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">inspire_id_to_coords</span><span class="op">(</span><span class="va">inspire</span>, as_sf <span class="op">=</span> <span class="cn">FALSE</span>, crs <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-coords">coords<a class="anchor" aria-label="anchor" href="#arg-coords"></a></dt>
<dd><p>A list, matrix, or dataframe where the X and Y coordinates are
either in the columns <code>"x"</code> and <code>"y"</code> or in the first and second
column position, respectively. Column names are converted to lowercase.</p>
<p>Can also be a <code>sf</code>/<code>sfc</code> object in which case the coordinates are
extracted using <code><a href="https://r-spatial.github.io/sf/reference/st_coordinates.html" class="external-link">st_coordinates</a></code>.</p></dd>


<dt id="arg-cellsize-m">cellsize_m<a class="anchor" aria-label="anchor" href="#arg-cellsize-m"></a></dt>
<dd><p>A single integer representing the grid cell size in metres
(e.g., 1000 for a 1 km grid). Required for spatial inputs.</p></dd>


<dt id="arg-short">short<a class="anchor" aria-label="anchor" href="#arg-short"></a></dt>
<dd><p>If <code>TRUE</code>, generates short INSPIRE ID. Defaults to
<code>FALSE</code>.</p></dd>


<dt id="arg-axis-order">axis_order<a class="anchor" aria-label="anchor" href="#arg-axis-order"></a></dt>
<dd><p>A character string specifying the coordinate order for the
output. This parameter is <strong>only used when <code>short = TRUE</code></strong>. It can be one of:</p><ul><li><p><code>"NE"</code> (the default) to produce the format <code>{cellsize}N{y}E{x}</code>.</p></li>
<li><p><code>"EN"</code> to produce the format <code>{cellsize}E{x}N{y}</code>.</p></li>
</ul></dd>


<dt id="arg-llc">llc<a class="anchor" aria-label="anchor" href="#arg-llc"></a></dt>
<dd><p>Do the coordinates in <code>coords</code> represent the lower-left
corners of their cells? If <code>FALSE</code>, subtracts each coordinate by
half of <code>cellsize_m</code>. If <code>TRUE</code>, leaves them as-is. Defaults
to <code>FALSE</code>, i.e., treat coordinates as cell centroids.</p></dd>


<dt id="arg-tolerance">tolerance<a class="anchor" aria-label="anchor" href="#arg-tolerance"></a></dt>
<dd><p>If <code>res</code> is <code>NULL</code>, controls the maximum
acceptable difference between calculated cell spacings to consider them
uniform. Defaults to <code>1e-6</code>.</p></dd>


<dt id="arg-sample">sample<a class="anchor" aria-label="anchor" href="#arg-sample"></a></dt>
<dd><p>If <code>res</code> is <code>NULL</code>, specifies the number of points
to guess a resolution from. Defaults to 2000 to keep performance high.
Increase this value if you are uncertain about the quality of your data.</p></dd>


<dt id="arg-inspire">inspire<a class="anchor" aria-label="anchor" href="#arg-inspire"></a></dt>
<dd><p>A vector of INSPIRE IDs. Can be either legacy or non-legacy.</p></dd>


<dt id="arg-as-sf">as_sf<a class="anchor" aria-label="anchor" href="#arg-as-sf"></a></dt>
<dd><p>Whether to return an object of class <code>sfc</code> or a dataframe.</p></dd>


<dt id="arg-crs">crs<a class="anchor" aria-label="anchor" href="#arg-crs"></a></dt>
<dd><p>An optional numeric EPSG code or <code><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">sf::st_crs</a></code> object. If provided,
this CRS will be assigned to all parsed coordinates, overriding any CRS
information found in long-form IDs. If <code>NULL</code> (the default), the CRS is
inferred from long-form IDs. When only short-form IDs are present,
the function will default to EPSG:3035 (with a warning) for both
<code>sf</code> and <code>data.frame</code> outputs.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>inspire_id_from_coords</code> returns a character vector containing
the INSPIRE identifiers.</p>
<p><code>inspire_id_to_coords</code> returns a dataframe or
<code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf</a></code> dataframe (if <code>as_sf = TRUE</code>) containing
the points extracted from the INSPIRE identifiers and information about
the CRS and cell sizes. Note that the returned coordinates are always
the centers of the grid cells as opposed to the lower-left corners.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Generate IDs from a dataframe</span></span></span>
<span class="r-in"><span><span class="va">coords</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4334100</span>, <span class="fl">4334200</span><span class="op">)</span>, y <span class="op">=</span> <span class="fl">2684000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gen</span> <span class="op">&lt;-</span> <span class="fu">inspire_id_from_coords</span><span class="op">(</span><span class="va">coords</span>, llc <span class="op">=</span> <span class="cn">TRUE</span>, cellsize_m <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ext</span> <span class="op">&lt;-</span> <span class="fu">inspire_id_to_coords</span><span class="op">(</span><span class="va">gen</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="co"># Note: inspire_id_to_coords gives cell centers, so this won't be identical if llc=TRUE</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Generate long format IDs</span></span></span>
<span class="r-in"><span><span class="fu">inspire_id_from_coords</span><span class="op">(</span><span class="va">coords</span>, llc <span class="op">=</span> <span class="cn">TRUE</span>, cellsize_m <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "CRS3035RES100mN2684000E4334100" "CRS3035RES100mN2684000E4334200"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Generate short format IDs with default "NE" axis order</span></span></span>
<span class="r-in"><span><span class="fu">inspire_id_from_coords</span><span class="op">(</span><span class="va">coords</span>, llc <span class="op">=</span> <span class="cn">TRUE</span>, cellsize_m <span class="op">=</span> <span class="fl">1000</span>, short <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1kmN2684E4334" "1kmN2684E4334"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Generate short format IDs with "EN" axis order</span></span></span>
<span class="r-in"><span><span class="fu">inspire_id_from_coords</span><span class="op">(</span><span class="va">coords</span>, llc <span class="op">=</span> <span class="cn">TRUE</span>, cellsize_m <span class="op">=</span> <span class="fl">1000</span>, short <span class="op">=</span> <span class="cn">TRUE</span>, axis_order <span class="op">=</span> <span class="st">"EN"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1kmE4334N2684" "1kmE4334N2684"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Extract coordinates from short ID strings</span></span></span>
<span class="r-in"><span><span class="fu">inspire_id_to_coords</span><span class="op">(</span><span class="st">"100mN34000E44000"</span>, crs <span class="op">=</span> <span class="fl">3035</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    crs cellsize       y       x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 3035      100 3400000 4400000</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Generate IDs from an sf dataframe</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"sf"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">coords_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4334100</span>, <span class="fl">4334200</span><span class="op">)</span>, y <span class="op">=</span> <span class="fl">2684000</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">coords_sf</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">coords_df</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">3035</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">inspire_id_from_coords</span><span class="op">(</span><span class="va">coords_sf</span>, cellsize_m <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "CRS3035RES1000mN2683500E4333600" "CRS3035RES1000mN2683500E4333700"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.ekotov.pro" class="external-link">Egor Kotov</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

